<script>
// Dados
const functionsData = {
    "Eliane":"Responsável pela direção geral.",
    "Fagner":"Manutenção e suporte técnico.",
    "Pss":"Suporte e manutenção de equipamentos.",
    "João":"Auxílio em suporte técnico.",
    "Jonas":"Atendimento de chamados."
};

// Toggle organograma
document.getElementById("toggle-organograma").addEventListener("click", () => {
    const eliane = document.getElementById("eliane");
    const line = document.getElementById("eliane-line");
    const children = document.getElementById("all-children");
    const show = eliane.style.display === "none";
    eliane.style.display = show ? "block" : "none";
    line.style.display = show ? "block" : "none";
    children.style.display = show ? "block" : "none";
});

// Modal
const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalText = document.getElementById("modalText");
const modalClose = document.getElementById("modalClose");

function openModal(name){
    modalTitle.innerText = name;
    modalText.innerText = functionsData[name] || "Função não cadastrada";
    modal.style.display = "flex";
}
function closeModal(){ modal.style.display = "none"; }

modalClose.addEventListener("click", closeModal);
modal.addEventListener("click",(e)=>{ if(e.target===modal) closeModal(); });
document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") closeModal(); });

// Sidebar PC
const sidebar = document.getElementById("sidebar");
function openSidebar(name){
    sidebar.innerHTML = `<h2>${name}</h2><p>${functionsData[name] || "Função não cadastrada"}</p>`;
    sidebar.style.display = "block";
}

// Clique nos nodes → modal ou sidebar
document.querySelectorAll(".node[data-name]").forEach(node=>{
    node.addEventListener("click",()=>{
        const name = node.dataset.name;
        if(window.innerWidth <= 768){
            openModal(name); // celular
        } else {
            openSidebar(name); // PC
        }
    });
});
</script>
